<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do List</title>
    <link rel="stylesheet" href="./style/root.css">
</head>

<body>
    <div id="container">
        <div id="side-nav">
            <div id="side-nav-title">ToDo</div>
        </div>
        <div id="main-content">
            <div id="tasks">
                <div style="position: sticky;  top: 0; background-color: var(--color1)">
                    <div id="title">To do List</div>
                </div>
                <div id="tasks-lists">
                    <div id="current">
                        <div id="curr-title">Current Tasks: </div>
                    </div>
                    <div id="completed">
                        <div id="completed-title">Completed Tasks: </div>
                    </div>
                </div>
            </div>
            <div id="search-container">
                <div id="search-bar" contenteditable="true"></div>
            </div>
        </div>
    </div>
    </div>
    <script>
        var search = document.getElementById('search-bar');
        search.addEventListener('input', (e) => {
            if (search.innerHTML.trim() === '<br>') {
                search.innerHTML = '';
            }
        })
        search.addEventListener('keydown', (e) => {
            if (e.key == "Enter") {
                addCurrentTask();
                console.log(search.innerHTML.trim());
                if (search.innerHTML.trim() === '') {
                    search.innerHTML = '';
                }
            }
        })
        function addCurrentTask() {
            var tasks = document.getElementById('current');
            var element = document.createElement('div');
            element.classList.add('task');
            element.innerHTML = search.innerText;
            element.addEventListener('click', (e) => {
                if (e.which == 1){
                    element.classList.toggle('finished-task');
                    if (element.classList.contains('finished-task')){
                        tasks.removeChild(element);
                        document.getElementById('completed').appendChild(element);
                    }else{
                        tasks.appendChild(element);
                        document.getElementById('completed').removeChild(element);
                    }
                }
            })            
            tasks.appendChild(element);
            document.getElementById('search-bar').innerHTML = '';
            document.getElementById('search-bar').innerHTML = '';
            return;
        }
    </script>
</body>

</html>
